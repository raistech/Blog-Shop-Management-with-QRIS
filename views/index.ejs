<% const pageTitle = 'Home'; %>
<%- include('partials/header') %>

<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">
                Selamat Datang di<br><%= settings.store_name || 'RSA Store' %>
            </h1>
            <p class="hero-description">
                <%= settings.store_description || 'Toko digital terpercaya dengan berbagai produk premium untuk kebutuhan Anda' %>
            </p>
            <div class="hero-actions">
                <a href="/shop" class="btn btn-primary btn-lg">
                    <i class="fas fa-shopping-bag"></i>
                    Mulai Belanja
                </a>
                <a href="/contact" class="btn btn-outline btn-lg">
                    <i class="fas fa-headset"></i>
                    Hubungi Kami
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="container" style="margin-top: 2rem;">
    <div class="grid grid-3">
        <div class="card">
            <div style="font-size: 3rem; text-align: center; margin-bottom: 1rem;">
                <i class="fas fa-shield-alt" style="background: linear-gradient(135deg, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></i>
            </div>
            <h3 class="text-center">Aman & Terpercaya</h3>
            <p class="text-center" style="color: var(--text-secondary);">
                Sistem pembayaran QRIS yang aman dan terverifikasi. Transaksi Anda dijamin aman.
            </p>
        </div>
        
        <div class="card">
            <div style="font-size: 3rem; text-align: center; margin-bottom: 1rem;">
                <i class="fas fa-bolt" style="background: linear-gradient(135deg, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></i>
            </div>
            <h3 class="text-center">Proses Cepat</h3>
            <p class="text-center" style="color: var(--text-secondary);">
                Pembayaran otomatis terdeteksi dan link download langsung dikirim ke email Anda.
            </p>
        </div>
        
        <div class="card">
            <div style="font-size: 3rem; text-align: center; margin-bottom: 1rem;">
                <i class="fas fa-headset" style="background: linear-gradient(135deg, var(--primary), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></i>
            </div>
            <h3 class="text-center">Support 24/7</h3>
            <p class="text-center" style="color: var(--text-secondary);">
                Tim support kami siap membantu Anda kapan saja via WhatsApp, Email, atau Telegram.
            </p>
        </div>
    </div>
</section>

<!-- Featured Products -->
<% if (products && products.length > 0) { %>
<section class="container" style="margin-top: 2rem;">
    <div style="text-align: center; margin-bottom: 2rem;">
        <h2>Produk Terbaru</h2>
        <p style="color: var(--text-secondary);">Temukan produk digital terbaik untuk kebutuhan Anda</p>
    </div>
    
    <div class="grid grid-3">
        <% products.forEach(product => { %>
            <div class="card product-card">
                <% if (product.image_url) { %>
                    <a href="/product/<%= product.slug %>" style="display: block; margin: -2rem -2rem 1.5rem -2rem;">
                        <img src="<%= product.image_url %>" alt="<%= product.name %>" style="width: 100%; height: 200px; object-fit: cover; border-radius: var(--radius-xl) var(--radius-xl) 0 0;">
                    </a>
                <% } else { %>
                    <div style="width: calc(100% + 4rem); height: 200px; margin: -2rem -2rem 1.5rem -2rem; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem; border-radius: var(--radius-xl) var(--radius-xl) 0 0;">
                        <i class="fas fa-box"></i>
                    </div>
                <% } %>
                
                <% if (product.is_digital) { %>
                    <span class="product-badge">Digital</span>
                <% } %>
                
                <div class="product-card-content">
                    <div class="product-category">
                        <%= product.category_name || 'Uncategorized' %>
                    </div>
                    
                    <h3 class="product-name"><%= product.name %></h3>
                    
                    <% if (product.description) { %>
                        <p class="product-description"><%= product.description %></p>
                    <% } %>
                    
                    <div class="product-price">
                        Rp <%= product.price.toLocaleString('id-ID') %>
                    </div>
                    
                    <div class="product-stock <%= product.stock <= 5 ? 'low-stock' : '' %> <%= product.stock === 0 ? 'out-of-stock' : '' %>">
                        <i class="fas fa-box"></i>
                        Stok: <%= product.stock %>
                    </div>
                    
                    <div class="product-card-actions">
                        <% if (product.stock > 0) { %>
                            <a href="/product/<%= product.slug %>" class="btn btn-primary" style="width: 100%;">
                                <i class="fas fa-eye"></i>
                                Lihat Detail
                            </a>
                        <% } else { %>
                            <button class="btn btn-secondary" disabled style="width: 100%;">
                                <i class="fas fa-times"></i>
                                Stok Habis
                            </button>
                        <% } %>
                    </div>
                </div>
            </div>
        <% }); %>
    </div>
    
    <div style="text-align: center; margin-top: 2rem;">
        <a href="/shop" class="btn btn-outline btn-lg">
            <i class="fas fa-th"></i>
            Lihat Semua Produk
        </a>
    </div>
</section>
<% } %>

<!-- How It Works -->
<section class="container" style="margin-top: 2rem;">
    <div style="text-align: center; margin-bottom: 2rem;">
        <h2>Cara Pembelian</h2>
        <p style="color: var(--text-secondary);">Mudah dan cepat dalam 4 langkah</p>
    </div>
    
    <div class="grid grid-4">
        <div class="card" style="text-align: center;">
            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--primary), var(--accent)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; font-size: 1.5rem; font-weight: bold; color: white;">1</div>
            <h4>Pilih Produk</h4>
            <p style="color: var(--text-secondary); font-size: 0.875rem;">Browse katalog dan pilih produk yang Anda inginkan</p>
        </div>
        
        <div class="card" style="text-align: center;">
            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--primary), var(--accent)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; font-size: 1.5rem; font-weight: bold; color: white;">2</div>
            <h4>Checkout</h4>
            <p style="color: var(--text-secondary); font-size: 0.875rem;">Isi data dan dapatkan kode QRIS dengan nominal unik</p>
        </div>
        
        <div class="card" style="text-align: center;">
            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--primary), var(--accent)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; font-size: 1.5rem; font-weight: bold; color: white;">3</div>
            <h4>Bayar QRIS</h4>
            <p style="color: var(--text-secondary); font-size: 0.875rem;">Scan QR Code dan bayar sesuai nominal yang tertera</p>
        </div>
        
        <div class="card" style="text-align: center;">
            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--primary), var(--accent)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; font-size: 1.5rem; font-weight: bold; color: white;">4</div>
            <h4>Download</h4>
            <p style="color: var(--text-secondary); font-size: 0.875rem;">Link download otomatis dikirim ke email Anda</p>
        </div>
    </div>
</section>

<!-- Latest Blog Posts -->
<% if (posts && posts.length > 0) { %>
<section class="container" style="margin-top: 2rem;">
    <div style="text-align: center; margin-bottom: 2rem;">
        <h2>Blog & Resources Terbaru</h2>
        <p style="color: var(--text-secondary);">Artikel, tutorial, dan resources gratis untuk Anda</p>
    </div>
    
    <div class="grid grid-3">
        <% posts.forEach(post => { %>
            <article class="card" style="display: flex; flex-direction: column; height: 100%;">
                <!-- Featured Image -->
                <% if (post.featured_image) { %>
                    <a href="/blog/<%= post.slug %>" style="display: block; margin: -2rem -2rem 1.5rem -2rem;">
                        <img src="<%= post.featured_image %>" alt="<%= post.title %>" style="width: 100%; height: 200px; object-fit: cover; border-radius: var(--radius-xl) var(--radius-xl) 0 0;">
                    </a>
                <% } else { %>
                    <div style="width: calc(100% + 4rem); height: 200px; margin: -2rem -2rem 1.5rem -2rem; background: linear-gradient(135deg, var(--primary), var(--accent)); display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem; border-radius: var(--radius-xl) var(--radius-xl) 0 0;">
                        <i class="fas fa-newspaper"></i>
                    </div>
                <% } %>
                
                <div style="flex: 1; display: flex; flex-direction: column;">
                    <!-- Post Meta -->
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; font-size: 0.875rem; color: var(--text-muted);">
                        <span><i class="fas fa-user"></i> <%= post.author_name || 'Admin' %></span>
                        <span><i class="fas fa-calendar"></i> <%= formatDateWIB(post.published_at, { day: '2-digit', month: 'short', year: 'numeric' }) %></span>
                    </div>
                    
                    <!-- Title -->
                    <h3 style="margin-bottom: 1rem;">
                        <a href="/blog/<%= post.slug %>" style="color: var(--text-primary); text-decoration: none;">
                            <%= post.title %>
                        </a>
                    </h3>
                    
                    <!-- Excerpt -->
                    <% if (post.excerpt) { %>
                        <p style="color: var(--text-secondary); margin-bottom: 1.5rem; flex: 1;">
                            <%= post.excerpt.substring(0, 120) %><%= post.excerpt.length > 120 ? '...' : '' %>
                        </p>
                    <% } %>
                    
                    <!-- Read More Button -->
                    <a href="/blog/<%= post.slug %>" class="btn btn-outline" style="margin-top: auto; width: 100%;">
                        <i class="fas fa-arrow-right"></i>
                        Baca Selengkapnya
                    </a>
                </div>
            </article>
        <% }); %>
    </div>
    
    <div style="text-align: center; margin-top: 2rem;">
        <a href="/blog" class="btn btn-outline btn-lg">
            <i class="fas fa-newspaper"></i>
            Lihat Semua Artikel
        </a>
    </div>
</section>
<% } %>

<!-- CTA Section -->
<section class="container" style="margin-top: 2rem; margin-bottom: 2rem;">
    <div class="card" style="background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); text-align: center; padding: 3rem;">
        <h2 style="color: white; margin-bottom: 1rem;">Siap Berbelanja?</h2>
        <p style="color: rgba(255, 255, 255, 0.9); margin-bottom: 2rem; font-size: 1.125rem;">
            Jelajahi katalog produk digital kami dan dapatkan produk premium dengan harga terjangkau
        </p>
        <a href="/shop" class="btn" style="background: white; color: var(--primary); font-weight: 700;">
            <i class="fas fa-shopping-cart"></i>
            Mulai Belanja Sekarang
        </a>
    </div>
</section>

<%- include('partials/footer') %>
